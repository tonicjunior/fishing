<!DOCTYPE html>
<html lang="pt-BR" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Pescaria Pixel</title>
    <meta
      name="description"
      content="Jogo de pesca relaxante com progress√£o roguelike"
    />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&family=Noto+Sans:wght@400;500;700&family=Fredoka:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#19a1e6",
              "primary-dark": "#127bb0",
              "background-light": "#f6f7f8",
              "background-dark": "#111c21",
              "surface-dark": "#1e282f",
              "surface-darker": "#151f25",
            },
            fontFamily: {
              display: ["Plus Jakarta Sans", "sans-serif"],
              body: ["Noto Sans", "sans-serif"],
              game: ["Fredoka", "sans-serif"],
            },
            animation: {
              "spin-slow": "spin 8s linear infinite",
              "bounce-slow": "bounce 3s infinite",
            },
          },
        },
      };
    </script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body
    class="font-display antialiased text-white select-none bg-background-dark overflow-x-hidden"
    oncontextmenu="return false;"
  >
    <div
      id="initial-flow"
      class="fixed inset-0 z-[9999] flex items-center justify-center bg-background-dark"
    >
      <div id="step-loading" class="flex flex-col items-center">
        <div
          class="w-16 h-16 border-4 border-primary/20 border-t-primary rounded-full animate-spin mb-4"
        ></div>
        <p
          class="text-primary font-black uppercase tracking-widest animate-pulse mb-1"
        >
          Carregando Mar√©...
        </p>
        <p
          id="loading-status"
          class="text-gray-500 text-[10px] font-bold uppercase tracking-widest"
        >
          Preparando iscas...
        </p>
      </div>

      <div
        id="step-config"
        class="hidden flex flex-col items-center w-full max-w-md p-6"
      >
        <h2 class="text-2xl font-black text-primary uppercase mb-8">
          Perfil do Pescador
        </h2>

        <div
          class="w-full space-y-6 bg-surface-darker/50 p-8 rounded-3xl border border-white/5 shadow-2xl text-center"
        >
          <div class="flex flex-col gap-2 text-left">
            <label class="text-[10px] font-black text-gray-500 uppercase ml-1"
              >Nickname</label
            >
            <input
              type="text"
              id="setup-nickname"
              placeholder="Seu nome no mar..."
              class="bg-background-dark border border-white/10 rounded-2xl px-5 py-4 text-white focus:border-primary outline-none transition-all"
            />
          </div>

          <div class="grid grid-cols-2 gap-4">
            <button
              id="setup-music"
              class="flex flex-col items-center gap-2 p-4 rounded-2xl border-2 border-primary text-primary bg-primary/5 transition-all"
            >
              <span class="material-symbols-outlined">music_note</span>
              <span class="text-[10px] font-black uppercase">M√∫sica: ON</span>
            </button>
            <button
              id="setup-sounds"
              class="flex flex-col items-center gap-2 p-4 rounded-2xl border-2 border-primary text-primary bg-primary/5 transition-all"
            >
              <span class="material-symbols-outlined">volume_up</span>
              <span class="text-[10px] font-black uppercase">Sons: ON</span>
            </button>
          </div>

          <button
            id="btn-go-to-menu"
            class="w-full py-5 bg-primary hover:bg-primary-dark text-white font-black uppercase rounded-2xl shadow-[0_6px_0_0_#127bb0] active:translate-y-1 active:shadow-none transition-all mt-4"
          >
            Entrar no Barco
          </button>
        </div>
      </div>
    </div>

    <div
      id="menu-screen"
      class="screen relative flex h-screen w-full flex-col overflow-hidden bg-background-dark"
    >
      <div class="absolute inset-0 z-0">
        <img
          class="h-full w-full object-cover opacity-80"
          src="assets/menu.png"
          alt="Background"
        />
        <div
          class="absolute inset-0 bg-gradient-to-b from-background-dark/40 via-transparent to-background-dark/95"
        ></div>
        <div class="absolute inset-0 bg-black/40 backdrop-blur-[2px]"></div>
      </div>

      <div
        class="relative z-10 flex h-full flex-col justify-between safe-area-inset"
      >
        <div class="flex w-full justify-between items-start p-4 pt-14 px-6">
          <div class="w-20"></div>
          <div
            class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full bg-surface-dark/90 backdrop-blur-md border border-white/10 pl-3 pr-4 shadow-lg ring-1 ring-black/20"
          >
            <span class="material-symbols-outlined text-primary text-[20px]"
              >account_circle</span
            >
            <p
              class="text-white text-sm font-bold leading-normal tracking-wide"
            >
              Lvl <span id="menu-level-display">1</span> ‚Ä¢
              <span class="text-[#ffd700]" id="menu-money-display">$0</span>
            </p>
          </div>
        </div>

        <div
          class="flex flex-1 flex-col items-center justify-center w-full px-6 mb-8"
        >
          <div class="flex flex-col items-center mb-12 relative">
            <span
              class="icon-fish material-symbols-outlined text-primary text-7xl mb-2 drop-shadow-[0_4px_4px_rgba(0,0,0,0.5)] animate-bounce"
              style="animation-duration: 3s"
              >phishing</span
            >
            <h1
              class="text-white tracking-tight text-5xl font-extrabold leading-none text-center drop-shadow-2xl uppercase italic transform -rotate-2"
            >
              Pescaria<br /><span class="text-primary text-6xl">Pixel</span>
            </h1>
          </div>

          <div class="flex w-full max-w-[320px] flex-col gap-4">
            <button
              id="btn-start-game"
              class="relative group overflow-hidden w-full rounded-2xl bg-primary h-[4.5rem] px-5 flex items-center justify-center shadow-[0_6px_0_0_#127bb0] active:shadow-none active:translate-y-[6px] active:mb-[6px] transition-all duration-100 ease-out border-t border-white/20"
            >
              <span
                class="material-symbols-outlined mr-3 text-white text-3xl drop-shadow-md"
                >play_arrow</span
              >
              <div class="flex flex-col items-start text-left">
                <span
                  class="text-white text-xl font-black uppercase tracking-wider leading-none drop-shadow-sm"
                  >Jogar</span
                >
                <span
                  class="text-blue-100 text-[10px] font-bold tracking-widest uppercase opacity-90 mt-0.5"
                  >Entrar no Mar</span
                >
              </div>
            </button>

            <button
              id="btn-settings-menu"
              class="group w-full rounded-xl bg-surface-dark hover:bg-[#25323b] h-14 px-5 flex items-center justify-between shadow-[0_4px_0_0_#111c21] border border-white/5 active:shadow-none active:translate-y-[4px] active:mb-[4px] transition-all duration-100 ease-out"
            >
              <div class="flex items-center">
                <span
                  class="material-symbols-outlined mr-3 text-gray-400 group-hover:text-primary transition-colors text-2xl"
                  >settings</span
                >
                <span
                  class="text-gray-200 font-bold uppercase tracking-wide group-hover:text-white transition-colors"
                  >Configura√ß√µes</span
                >
              </div>
            </button>

            <button
              id="btn-tutorial-menu"
              class="group w-full rounded-xl bg-surface-dark hover:bg-[#25323b] h-14 px-5 flex items-center justify-between shadow-[0_4px_0_0_#111c21] border border-white/5 active:shadow-none active:translate-y-[4px] active:mb-[4px] transition-all duration-100 ease-out"
            >
              <div class="flex items-center">
                <span
                  class="material-symbols-outlined mr-3 text-gray-400 group-hover:text-primary transition-colors text-2xl"
                  >menu_book</span
                >
                <span
                  class="text-gray-200 font-bold uppercase tracking-wide group-hover:text-white transition-colors"
                  >Tutorial</span
                >
              </div>
            </button>
            <button
              id="btn-multi-menu"
              class="disabled group w-full rounded-xl bg-surface-dark hover:bg-[#25323b] h-14 px-5 flex items-center justify-between shadow-[0_4px_0_0_#111c21] border border-white/5 active:shadow-none"
            >
              <div class="flex items-center">
                <span
                  class="material-symbols-outlined mr-3 text-gray-400 group-hover:text-primary transition-colors text-2xl"
                  >sports_kabaddi</span
                >
                <span
                  class="text-gray-200 font-bold uppercase tracking-wide group-hover:text-white transition-colors"
                  >Multiplayer</span
                >
              </div>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      id="map-screen"
      class="hidden-screen fixed inset-0 z-50 bg-background-dark"
    >
      <div class="relative h-full w-full overflow-hidden">
        <div class="absolute inset-0 bg-[#1a4461]">
          <div
            class="absolute bottom-0 left-0 right-0 h-2/3 bg-[#112d42] skew-y-3 transform origin-bottom-right opacity-80"
          ></div>
          <div
            class="absolute top-0 left-0 right-0 h-1/3 bg-[#2a6b96] opacity-30"
          ></div>
          <div
            class="absolute inset-0 opacity-10"
            style="
              background-image: radial-gradient(#fff 1px, transparent 1px);
              background-size: 20px 20px;
            "
          ></div>
        </div>

        <svg id="map-lines" class="map-lines-svg"></svg>

        <div
          class="absolute top-0 left-0 right-0 z-40 p-4 pt-safe-top bg-gradient-to-b from-black/80 to-transparent pointer-events-none"
        >
          <div class="flex items-center justify-between pointer-events-auto">
            <button
              id="btn-close-map"
              class="flex h-10 w-10 items-center justify-center rounded-xl bg-surface-dark/80 text-white backdrop-blur-md border border-white/10 active:scale-95 transition-transform"
            >
              <span class="material-symbols-outlined">arrow_back</span>
            </button>
            <h1
              class="text-xl font-bold font-display text-white drop-shadow-md"
            >
              Mapa de Navega√ß√£o
            </h1>
            <div class="w-10"></div>
          </div>
        </div>

        <div
          id="map-nodes-container"
          class="absolute inset-0 z-30 pointer-events-none"
        ></div>

        <div id="map-details-card" class="map-details-card">
          <div class="flex justify-center -mt-4 mb-4 opacity-30">
            <div class="h-1.5 w-12 rounded-full bg-gray-400"></div>
          </div>

          <div class="flex items-start justify-between mb-6">
            <div>
              <div class="flex items-center gap-2 mb-1">
                <h2
                  id="map-detail-title"
                  class="text-2xl font-bold font-display text-white"
                >
                  Nome da √Årea
                </h2>
                <span
                  id="map-detail-badge"
                  class="bg-primary/20 text-primary text-[10px] font-bold px-2 py-0.5 rounded border border-primary/20 uppercase tracking-wide"
                  >Selecionado</span
                >
              </div>
              <div class="flex items-center gap-2">
                <div id="map-detail-stars" class="star-rating"></div>
                <span
                  id="map-detail-difficulty"
                  class="text-gray-400 text-xs font-medium"
                  >Dificuldade</span
                >
              </div>
            </div>
            <div
              class="flex flex-col items-end bg-black/20 p-2.5 rounded-xl border border-white/5"
            >
              <div
                class="flex items-center gap-1 text-gray-400 text-[10px] font-bold uppercase tracking-wider mb-0.5"
              >
                <span class="material-symbols-outlined text-xs">schedule</span>
                Viagem
              </div>
              <span id="map-detail-time" class="text-white text-lg font-bold"
                >0s</span
              >
            </div>
          </div>

          <div class="grid grid-cols-2 gap-3 mb-6">
            <div
              class="bg-surface-dark/50 rounded-xl p-3 flex items-center gap-3 border border-white/5"
            >
              <div
                class="h-10 w-10 rounded-full bg-blue-500/20 flex items-center justify-center shrink-0"
              >
                <span class="material-symbols-outlined text-blue-400"
                  >water</span
                >
              </div>
              <div class="flex flex-col">
                <span class="text-gray-400 text-[10px] uppercase font-bold"
                  >Profundidade</span
                >
                <span id="map-detail-depth" class="text-white text-sm font-bold"
                  >--</span
                >
              </div>
            </div>
            <div
              class="bg-surface-dark/50 rounded-xl p-3 flex items-center gap-3 border border-white/5"
              id="map-detail-fish-types"
            >
              <div
                class="h-10 w-10 rounded-full bg-orange-500/20 flex items-center justify-center shrink-0"
              >
                <span class="material-symbols-outlined text-orange-400"
                  >set_meal</span
                >
              </div>
              <div class="flex flex-col">
                <span class="text-gray-400 text-[10px] uppercase font-bold"
                  >Peixes</span
                >
                <span
                  id="map-detail-fish-count"
                  class="text-white text-sm font-bold"
                  >Variados</span
                >
              </div>
            </div>
          </div>

          <button
            id="btn-travel-confirm"
            class="w-full bg-gradient-to-r from-primary to-blue-600 hover:to-blue-500 text-white font-bold py-4 rounded-xl shadow-[0_4px_14px_0_rgba(25,161,230,0.39)] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group"
          >
            <span
              class="material-symbols-outlined text-xl group-hover:animate-bounce"
              >sailing</span
            >
            <span>Viajar para este Local</span>
          </button>
        </div>
      </div>
    </div>

    <div id="game-screen" class="hidden-screen font-game pb-24 md:pb-0">
      <div id="game-container">
        <header class="game-header relative md:block hidden">
          <button
            id="btn-return-menu"
            class="absolute left-0 top-4 bg-[#132f4c] border border-[#1e4976] p-2 rounded-lg text-[#90caf9] hover:bg-[#173a5e] transition-colors"
          >
            <span class="material-symbols-outlined text-xl">arrow_back</span>
          </button>
          <h1>üé£ Pescaria Pixel</h1>
          <p>Pesque, evolua e conquiste os mares!</p>
        </header>

        <main class="game-main">
          <aside
            class="panel panel-left mobile-view hidden md:flex"
            id="mobile-view-stats"
          >
            <div class="card player-stats">
              <div class="stats-header">
                <div class="level-badge" id="player-level">1</div>
                <div class="stats-info">
                  <span class="label">N√≠vel</span>
                  <span class="value" id="player-name-display"></span>
                </div>
                <div class="money-display">
                  <span class="label">Dinheiro</span>
                  <span class="value gold" id="player-money">üí∞ $0</span>
                </div>
              </div>
              <div class="xp-bar-container">
                <div class="xp-bar-label">
                  <span>XP</span>
                  <span id="xp-text">0/100</span>
                </div>
                <div class="xp-bar">
                  <div class="xp-bar-fill" id="xp-fill"></div>
                </div>
              </div>
              <div class="stats-grid">
                <div class="stat-item">
                  <span class="stat-value" id="total-fish">0</span>
                  <span class="stat-label">Peixes</span>
                </div>
                <div class="stat-item">
                  <span class="stat-value" id="total-earned">$0</span>
                  <span class="stat-label">Ganho</span>
                </div>
              </div>
            </div>

            <div class="card boat-inventory flex flex-col h-full">
              <div class="flex border-b border-white/10 mb-4">
                <button
                  id="tab-btn-cargo"
                  class="flex-1 py-2 text-xs font-black uppercase tracking-wider border-b-2 border-primary text-primary transition-all"
                  onclick="switchInventoryTab('cargo')"
                >
                  Carga
                </button>
                <button
                  id="tab-btn-album"
                  class="flex-1 py-2 text-xs font-black uppercase tracking-wider border-b-2 border-transparent text-gray-500 hover:text-gray-300 transition-all"
                  onclick="switchInventoryTab('album')"
                >
                  √Ålbum
                </button>
              </div>

              <div id="inventory-cargo-view">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-[10px] text-gray-400 uppercase font-bold"
                    >No Barco</span
                  >
                  <span class="capacity-badge" id="boat-capacity">0/10</span>
                </div>
                <div class="capacity-bar mb-4">
                  <div class="capacity-fill" id="capacity-fill"></div>
                </div>
                <div class="fish-grid" id="fish-inventory"></div>
              </div>

              <div id="inventory-album-view" class="hidden">
                <div
                  class="flex justify-between items-center mb-3 bg-black/20 p-2 rounded-lg"
                >
                  <span class="text-[9px] uppercase font-bold text-gray-400"
                    >Descobertos</span
                  >
                  <span
                    id="album-progression-text"
                    class="text-primary font-bold text-xs"
                    >0/15</span
                  >
                </div>
                <div
                  id="album-list-container"
                  class="grid grid-cols-3 gap-3 overflow-y-auto max-h-[350px] pr-1"
                ></div>
              </div>
            </div>
          </aside>

          <section
            class="panel panel-center mobile-view active flex"
            id="mobile-view-game"
          >
            <div
              class="md:hidden w-full flex justify-between items-center mb-4 px-2"
            >
              <div
                class="flex items-center gap-2 bg-surface-dark py-1 px-3 rounded-full border border-white/10"
              >
                <span class="text-xs text-gray-400">Nvl</span>
                <span class="font-bold text-white" id="mobile-level-display"
                  >1</span
                >
              </div>
              <div
                class="bg-surface-dark py-1 px-3 rounded-full border border-white/10 text-[#ffd700] font-bold"
              >
                <span id="mobile-money-display">$0</span>
              </div>
            </div>

            <div class="ocean-view" id="ocean-view">
              <div class="sky"></div>
              <div class="sun"></div>
              <div class="clouds">
                <div class="cloud cloud-1"></div>
                <div class="cloud cloud-2"></div>
              </div>
              <div class="wave wave-2"></div>
              <div class="wave wave-3"></div>
              <div class="underwater">
                <div class="bubble bubble-1"></div>
                <div class="bubble bubble-2"></div>
                <div class="fish-swimming fish-swim-1">üêü</div>
              </div>
              <div class="boat" id="boat">
                <img
                  class="h-full w-full object-cover opacity-80"
                  src="assets/2.png"
                  alt="Boat"
                />
              </div>

              <div class="area-badge" id="area-badge">
                <span class="area-emoji">üèñÔ∏è</span>
                <span class="area-name">Costa Rasa</span>
              </div>

              <div class="status-bar" id="status-bar">
                <p class="status-text" id="status-text">Pronto para pescar</p>
                <div class="progress-bar" id="progress-bar">
                  <div class="progress-fill" id="progress-fill"></div>
                </div>
              </div>
            </div>

            <div class="action-buttons">
              <button class="btn btn-primary btn-fish" id="btn-fish">
                <span>üé£</span> Pescar
              </button>
            </div>

            <div
              class="card area-selector-card mt-4 p-4 flex items-center justify-between"
              id="maps-screen"
            >
              <div>
                <p class="text-xs text-[#5c8ab5] uppercase font-bold mb-1">
                  Localiza√ß√£o Atual
                </p>
                <div class="flex items-center gap-2">
                  <span class="text-2xl" id="current-area-emoji-display"
                    >üèñÔ∏è</span
                  >
                  <h3 class="text-lg font-bold" id="current-area-name-display">
                    Costa Rasa
                  </h3>
                </div>
              </div>
              <button
                id="btn-open-map"
                class="bg-[#19a1e6] hover:bg-[#127bb0] text-white p-3 rounded-xl shadow-lg transition-transform active:scale-95"
              >
                <span class="material-symbols-outlined text-2xl">map</span>
              </button>
            </div>
          </section>

          <aside
            class="panel panel-right mobile-view hidden md:flex"
            id="mobile-view-shop"
          >
            <div class="card shop-panel" id="shop-panel">
              <div class="card-header">
                <h3>üè™ Loja</h3>
                <span class="gold" id="shop-money">üí∞ $0</span>
              </div>

              <div class="sell-section">
                <div class="sell-header">
                  <div>
                    <p class="sell-title">Vender Peixes</p>
                    <p class="sell-count" id="sell-count">0 peixes</p>
                  </div>
                  <span class="sell-value gold" id="sell-value">$0</span>
                </div>
                <button class="btn btn-gold btn-sell" id="btn-sell">
                  <span class="sell-text">Vender Todos</span>
                  <div class="sell-progress"></div>
                </button>
                <p class="sell-timer-text" id="sell-timer-text"></p>
              </div>

              <div class="upgrade-tabs">
                <button class="tab-btn active" data-tab="rod">
                  <div class="tab-content-icon">
                    <span class="tab-icon">üé£</span>
                    <span class="tab-text">Vara</span>
                  </div>
                </button>

                <button class="tab-btn" data-tab="boat">
                  <div class="tab-content-icon">
                    <span class="tab-icon">üö§</span>
                    <span class="tab-text">Barco</span>
                  </div>
                </button>

                <button class="tab-btn" data-tab="bonuses">
                  <div class="tab-content-icon">
                    <span class="tab-icon">‚≠ê</span>
                    <span class="tab-text">B√¥nus</span>
                  </div>
                </button>

                <button class="tab-btn" data-tab="prestige">
                  <div class="tab-content-icon">
                    <span class="tab-icon">üí†</span>
                    <span class="tab-text">Prest√≠gio</span>
                  </div>
                </button>
              </div>

              <div class="upgrade-content" id="upgrade-content">
                <div class="tab-content active" id="tab-rod">
                  <div class="upgrade-item" data-upgrade="depth">
                    <div class="upgrade-icon">üìè</div>
                    <div class="upgrade-info">
                      <p class="upgrade-name">Profundidade</p>
                      <p class="upgrade-desc">
                        Permite pescar em √°guas mais fundas e perigosas.
                      </p>
                      <div class="upgrade-dots" id="depth-dots"></div>
                    </div>
                    <button class="btn btn-upgrade" id="btn-depth">$50</button>
                  </div>
                  <div class="upgrade-item" data-upgrade="stability">
                    <div class="upgrade-icon">üéØ</div>
                    <div class="upgrade-info">
                      <p class="upgrade-name">Estabilidade</p>
                      <p class="upgrade-desc">
                        Aumenta o tamanho da barra e facilita a captura.
                      </p>
                      <div class="upgrade-dots" id="stability-dots"></div>
                    </div>
                    <button class="btn btn-upgrade" id="btn-stability">
                      $40
                    </button>
                  </div>
                  <div class="upgrade-item" data-upgrade="bait">
                    <div class="upgrade-icon">ü™±</div>
                    <div class="upgrade-info">
                      <p class="upgrade-name">Isca</p>
                      <p class="upgrade-desc">
                        Aumenta drasticamente a chance de peixes raros.
                      </p>
                      <div class="upgrade-dots" id="bait-dots"></div>
                    </div>
                    <button class="btn btn-upgrade" id="btn-bait">$60</button>
                  </div>
                </div>

                <div class="tab-content" id="tab-boat">
                  <div class="upgrade-item" data-upgrade="capacity">
                    <div class="upgrade-icon">üì¶</div>
                    <div class="upgrade-info">
                      <p class="upgrade-name">Capacidade</p>
                      <p class="upgrade-desc">
                        Aumenta o espa√ßo do invent√°rio do barco.
                      </p>
                      <div class="upgrade-dots" id="capacity-dots"></div>
                    </div>
                    <button class="btn btn-upgrade" id="btn-capacity">
                      $80
                    </button>
                  </div>
                  <div class="upgrade-item" data-upgrade="speed">
                    <div class="upgrade-icon">üí®</div>
                    <div class="upgrade-info">
                      <p class="upgrade-name">Velocidade</p>
                      <p class="upgrade-desc">
                        Reduz o tempo de viagem entre as √°reas do mapa.
                      </p>
                      <div class="upgrade-dots" id="speed-dots"></div>
                    </div>
                    <button class="btn btn-upgrade" id="btn-speed">$70</button>
                  </div>
                  <div class="upgrade-item" data-upgrade="sonar">
                    <div class="upgrade-icon">üì°</div>
                    <div class="upgrade-info">
                      <p class="upgrade-name">Sonar</p>
                      <p class="upgrade-desc">
                        Reduz o tempo necess√°rio para encontrar um peixe.
                      </p>
                      <div class="upgrade-dots" id="sonar-dots"></div>
                    </div>
                    <button class="btn btn-upgrade" id="btn-sonar">$90</button>
                  </div>
                </div>

                <div class="tab-content" id="tab-bonuses">
                  <div class="bonus-grid">
                    <button class="bonus-btn" id="bonus-time">
                      <div>
                        <span class="bonus-icon">‚ö°</span>
                      </div>
                      <div>
                        <p class="bonus-name">Expedi√ß√£o √Ågil</p>

                        <p class="bonus-desc">
                          Reduz tempo de viagem e busca em 10%.
                        </p>
                        <p class="bonus-current" id="time-bonus">+0%</p>
                      </div>
                    </button>
                    <button class="bonus-btn" id="bonus-xp">
                      <div>
                        <span class="bonus-icon">üìö</span>
                      </div>
                      <div>
                        <p class="bonus-name">Mestre Observador</p>
                        <p class="bonus-desc">Aumenta XP ganho em 20%.</p>
                        <p class="bonus-current" id="xp-bonus">+0%</p>
                      </div>
                    </button>
                    <button class="bonus-btn" id="bonus-sell">
                      <div>
                        <span class="bonus-icon">üí∞</span>
                      </div>
                      <div>
                        <p class="bonus-name">L√°bia Comercial</p>
                        <p class="bonus-desc">Aumenta valor de venda em 15%.</p>
                        <p class="bonus-current" id="sell-bonus">+0%</p>
                      </div>
                    </button>
                    <button class="bonus-btn" id="bonus-rare">
                      <div>
                        <span class="bonus-icon">ü¶Ö</span>
                      </div>
                      <div>
                        <p class="bonus-name">Sorte de Capit√£o</p>
                        <p class="bonus-desc">
                          Aumenta chance de peixes raros em 8%.
                        </p>
                        <p class="bonus-current" id="rare-bonus">+0%</p>
                      </div>
                    </button>
                  </div>
                  <p class="bonus-points mt-2 text-center text-sm">
                    Pontos:
                    <span id="bonus-points" class="font-bold text-[#ffc107]"
                      >0</span
                    >
                  </p>
                </div>

                <div class="tab-content" id="tab-prestige">
                  <div
                    class="bg-surface-dark/50 p-4 rounded-2xl border border-primary/20 mb-4"
                  >
                    <h4 class="text-primary font-black uppercase text-xs mb-2">
                      Status de Renascimento
                    </h4>
                    <p class="text-[10px] text-gray-400 mb-4">
                      Ao renascer, voc√™ perde seu dinheiro e melhorias, mas
                      ganha poderes permanentes.
                    </p>

                    <div
                      class="space-y-2 mb-6"
                      id="prestige-requirements"
                    ></div>

                    <button
                      id="btn-prestige-action"
                      class="btn btn-primary w-full disabled"
                      disabled
                    >
                      Bloqueado
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </aside>
        </main>
        <nav
          class="md:hidden fixed bottom-0 left-0 right-0 h-16 bg-surface-dark/95 backdrop-blur-md border-t border-white/10 grid grid-cols-5 z-50 pb-safe-bottom"
        >
          <button class="mobile-nav-btn group" data-target="stats">
            <span
              class="material-symbols-outlined mb-1 text-gray-400 group-[.active]:text-primary transition-colors"
              >backpack</span
            >
            <span
              class="text-[10px] font-bold uppercase text-gray-400 group-[.active]:text-primary transition-colors"
              >Bolsa</span
            >
          </button>

          <button class="mobile-nav-btn group" data-target="shop">
            <span
              class="material-symbols-outlined mb-1 text-gray-400 group-[.active]:text-primary transition-colors"
              >storefront</span
            >
            <span
              class="text-[10px] font-bold uppercase text-gray-400 group-[.active]:text-primary transition-colors"
              >Loja</span
            >
          </button>

          <div
            class="relative flex justify-center items-center pointer-events-none"
          >
            <button
              class="mobile-fish-btn pointer-events-auto absolute -top-8 h-16 w-16 rounded-full bg-gradient-to-b from-primary to-primary-dark border-[4px] border-[#132f4c] shadow-[0_0_20px_rgba(25,161,230,0.5)] flex items-center justify-center transition-transform active:scale-95 group"
              data-target="game"
            >
              <span
                class="material-symbols-outlined text-white text-4xl drop-shadow-md"
                >phishing</span
              >
            </button>
            <span
              class="absolute bottom-1 text-[10px] font-bold uppercase text-primary tracking-widest"
              >Pescar</span
            >
          </div>

          <button class="mobile-nav-btn group" id="btn-mobile-map-nav">
            <span
              class="material-symbols-outlined mb-1 text-gray-400 transition-colors"
              >map</span
            >
            <span
              class="text-[10px] font-bold uppercase text-gray-400 transition-colors"
              >Mapa</span
            >
          </button>

          <button class="mobile-nav-btn group" id="btn-mobile-menu-nav">
            <span
              class="material-symbols-outlined mb-1 text-gray-400 transition-colors"
              >menu</span
            >
            <span
              class="text-[10px] font-bold uppercase text-gray-400 transition-colors"
              >Menu</span
            >
          </button>
        </nav>
      </div>
    </div>
    <div
      id="tutorial-screen"
      class="hidden-screen relative w-full min-h-screen bg-background-dark p-6 overflow-y-auto"
    >
      <div class="max-w-2xl mx-auto space-y-6 pb-20">
        <div
          class="flex items-center justify-between mb-8 sticky top-0 bg-background-dark/95 backdrop-blur-sm py-4 z-20 border-b border-white/10"
        >
          <h2 class="text-3xl font-black uppercase text-primary">Como Jogar</h2>
          <button
            id="btn-back-tutorial"
            class="bg-surface-dark p-2 rounded-full hover:bg-surface-darker border border-white/10"
          >
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>
        <div class="space-y-4">
          <div
            class="bg-surface-dark p-6 rounded-2xl border border-white/5 shadow-lg"
          >
            <h3 class="font-bold text-white mb-2">1. Pesca</h3>
            <p class="text-gray-400">
              Use o mapa para viajar. Clique em pescar. Quando o peixe morder,
              ven√ßa o minigame mantendo o peixe na barra verde.
            </p>
          </div>
          <div
            class="bg-surface-dark p-6 rounded-2xl border border-white/5 shadow-lg"
          >
            <h3 class="font-bold text-white mb-2">2. Evolu√ß√£o</h3>
            <p class="text-gray-400">
              Venda peixes para ganhar dinheiro e melhore seu equipamento na
              Loja. Suba de n√≠vel para ganhar b√¥nus.
            </p>
          </div>
        </div>
      </div>
    </div>

    <div
      id="settings-screen"
      class="hidden-screen relative w-full min-h-screen bg-background-dark p-6"
    >
      <div class="max-w-md mx-auto h-full flex flex-col">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-2xl font-black uppercase text-white">
            Configura√ß√µes
          </h2>
          <button
            id="btn-back-settings"
            class="bg-surface-dark p-2 rounded-full hover:bg-surface-darker border border-white/10"
          >
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>

        <div class="space-y-6">
          <div class="bg-surface-dark p-5 rounded-2xl border border-white/5">
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center gap-3">
                <span class="material-symbols-outlined text-primary"
                  >music_note</span
                >
                <span class="font-bold">M√∫sica de Fundo</span>
              </div>
              <button
                id="btn-mute-music"
                class="text-xs uppercase font-black text-primary"
              >
                Ativo
              </button>
            </div>

            <select
              id="select-music"
              class="w-full mb-4 bg-background-dark text-gray-300 border border-white/10 rounded-lg p-2 text-sm focus:ring-primary focus:border-primary"
            >
              <option value="random">üîÄ Aleat√≥rio</option>
              <option value="assets/sound/menu/menu1.mp3">
                Trilha 1 - Calma
              </option>
              <option value="assets/sound/menu/menu2.mp3">
                Trilha 2 - Brisa
              </option>
              <option value="assets/sound/menu/menu3.mp3">
                Trilha 3 - Aventura
              </option>
              <option value="assets/sound/menu/menu4.mp3">
                Trilha 4 - Profundeza
              </option>
              <option value="assets/sound/menu/menu5.mp3">
                Trilha 5 - Porto
              </option>
              <option value="assets/sound/menu/menu6.mp3">
                Trilha 6 - Mist√©rio
              </option>
            </select>

            <input
              type="range"
              id="volume-music"
              min="0"
              max="1"
              step="0.01"
              value="0.5"
              class="w-full h-1.5 bg-background-dark rounded-lg appearance-none cursor-pointer accent-primary"
            />
          </div>
          <div class="bg-surface-dark p-5 rounded-2xl border border-white/5">
            <div class="flex items-center justify-between mb-4">
              <div class="flex items-center gap-3">
                <span class="material-symbols-outlined text-primary"
                  >volume_up</span
                >
                <span class="font-bold">Efeitos Sonoros</span>
              </div>
              <button
                id="btn-mute-sounds"
                class="text-xs uppercase font-black text-primary"
              >
                Ativo
              </button>
            </div>
            <input
              type="range"
              id="volume-sounds"
              min="0"
              max="1"
              step="0.01"
              value="0.7"
              class="w-full h-1.5 bg-background-dark rounded-lg appearance-none cursor-pointer accent-primary"
            />
          </div>
        </div>

        <div
          class="bg-red-500/10 border border-red-500/20 rounded-2xl p-5 mt-10"
        >
          <h3 class="text-red-400 font-bold mb-2">Zona de Perigo</h3>
          <button
            id="btn-reset-save"
            class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-xl shadow-lg"
          >
            Apagar Progresso
          </button>
        </div>
      </div>
    </div>

    <div class="toast-container" id="toast-container"></div>
    <div class="modal" id="level-up-modal">
      <div class="modal-content">
        <div class="modal-icon">üéâ</div>
        <h2>N√≠vel <span id="new-level">2</span>!</h2>
        <p>Voc√™ ganhou 1 ponto de b√¥nus!</p>
        <button class="btn btn-primary" id="btn-close-modal">Continuar</button>
      </div>
    </div>

    <div class="minigame-overlay" id="minigame-overlay">
      <div
        class="absolute inset-0 z-0 bg-black/60 backdrop-blur-sm minigame-background"
      ></div>

      <div class="countdown" id="countdown">3</div>

      <div
        class="relative z-10 flex flex-col w-full h-full items-center justify-center gap-6 md:gap-10 px-8"
      >
        <div id="minigame-global-info" class="text-center animate-fade-in pt-4">
          <h4
            id="minigame-area-name"
            class="text-primary font-black uppercase tracking-[0.3em] text-xs md:text-sm mb-1"
          >
            ---
          </h4>
          <div
            id="minigame-area-difficulty"
            class="flex justify-center gap-1 text-yellow-500 text-sm"
          ></div>
        </div>

        <div
          class="flex w-full h-full items-center justify-center gap-6 md:gap-12"
        >
          <div
            class="hidden md:flex flex-col gap-4 min-w-[250px] animate-slide-in-left"
          >
            <div
              class="bg-surface-dark/90 backdrop-blur-md border border-white/10 p-5 rounded-2xl shadow-2xl relative overflow-hidden group"
            >
              <div class="absolute top-0 right-0 p-3 opacity-10">
                <span class="material-symbols-outlined text-6xl">phishing</span>
              </div>
              <p
                class="text-primary text-[10px] font-black uppercase tracking-widest mb-2"
              >
                Alvo Identificado
              </p>
              <div class="flex items-center gap-4">
                <div class="relative">
                  <span
                    id="minigame-fish-emoji"
                    class="text-5xl filter drop-shadow-lg inline-block"
                  ></span>
                </div>
                <div>
                  <h3
                    id="minigame-fish-name"
                    class="text-xl font-black text-white font-display leading-none mb-1 uppercase italic"
                  >
                    ---
                  </h3>
                  <div
                    id="minigame-difficulty"
                    class="text-yellow-400 text-xs tracking-widest"
                  ></div>
                </div>
              </div>
            </div>
            <div
              class="bg-black/40 backdrop-blur-md rounded-xl p-3 border border-white/5 flex items-center justify-center"
            >
              <p
                class="text-white/60 text-[10px] font-black uppercase tracking-tighter"
              >
                Segure para subir ‚Ä¢ Solte para descer
              </p>
            </div>
          </div>

          <div
            class="relative flex gap-4 md:gap-6 items-center heigh-auto h-[64vh]"
          >
            <div
              class="h-full w-4 md:w-6 bg-black/60 backdrop-blur-xl rounded-full border border-white/10 relative overflow-hidden shadow-2xl"
            >
              <div
                id="catch-progress-fill"
                class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-green-600 via-emerald-400 to-green-300 transition-none"
                style="height: 30%"
              ></div>
            </div>

            <div
              id="fishing-bar"
              class="h-full w-16 md:w-20 bg-[#0f172a]/90 backdrop-blur-xl rounded-full border-2 border-[#334155] relative overflow-hidden shadow-2xl"
            >
              <div
                id="catch-zone"
                class="absolute left-1 right-1 h-[25%] rounded-lg bg-primary/30 border border-primary/50 shadow-[0_0_20px_rgba(25,161,230,0.4)] z-10 backdrop-blur-sm transition-none"
                style="top: 50%"
              ></div>
              <div
                id="fish-marker"
                class="absolute left-1/2 -translate-x-1/2 z-20 pointer-events-none transition-none"
                style="top: 50%"
              >
                <div class="relative" id="fish-marker-inner"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal result-modal" id="result-modal">
      <div class="modal-content result-content">
        <div id="result-emoji" class="result-emoji"></div>
        <h2 id="result-title"></h2>
        <p id="result-desc"></p>
        <div id="result-stats" class="result-stats"></div>
        <button class="btn btn-primary" id="btn-close-result">Continuar</button>
      </div>
    </div>

    <div class="modal" id="message-modal">
      <div class="modal-content">
        <div id="msg-modal-icon" class="modal-icon">‚ÑπÔ∏è</div>
        <h2 id="msg-modal-title">Aviso</h2>
        <p id="msg-modal-body" class="mb-6 text-gray-300"></p>
        <button
          class="btn btn-primary w-full"
          onclick="document.getElementById('message-modal').classList.remove('active')"
        >
          OK
        </button>
      </div>
    </div>

    <div class="modal" id="prestige-confirm-modal">
      <div
        class="modal-content border-primary shadow-[0_0_30px_rgba(25,161,230,0.4)]"
      >
        <div class="modal-icon text-primary">üí†</div>
        <h2 class="text-white">Renascimento Ritual</h2>
        <p class="text-gray-400 text-sm mt-2">
          Ao aceitar, seu ouro e melhorias ser√£o perdidos. O mar esquecer√° seus
          feitos antigos, mas o presentear√° com novos mist√©rios.
        </p>

        <div
          class="bg-black/30 p-4 rounded-xl my-4 text-left border border-white/5"
        >
          <p class="text-[10px] font-bold text-primary uppercase mb-2">
            Consequ√™ncias:
          </p>
          <ul class="text-[10px] text-gray-300 space-y-1">
            <li>‚Ä¢ Dinheiro e N√≠vel ser√£o resetados</li>
            <li>‚Ä¢ √Ålbum de Peixes ser√° limpo</li>
            <li>‚Ä¢ Vara e Barco voltar√£o ao n√≠vel 1</li>
            <li class="text-green-400">‚Ä¢ B√¥nus permanente desbloqueado</li>
          </ul>
        </div>

        <div class="flex gap-2">
          <button
            class="btn btn-secondary flex-1"
            onclick="document.getElementById('prestige-confirm-modal').classList.remove('active')"
          >
            Desistir
          </button>
          <button class="btn btn-primary flex-1" id="btn-prestige-confirm">
            RENASCER
          </button>
        </div>
      </div>
    </div>

    <div
      id="fish-details-modal"
      class="fixed inset-0 z-[100] flex items-end justify-center pointer-events-none"
    >
      <div
        class="bg-[#12141d] w-full max-w-md p-6 rounded-t-3xl border-t border-primary/30 transform translate-y-full transition-transform duration-300 ease-out pointer-events-auto"
      >
        <div class="flex items-start justify-between mb-4">
          <div class="flex items-center gap-4">
            <div
              id="fish-detail-image-container"
              class="w-16 h-16 bg-white/5 rounded-2xl flex items-center justify-center p-2 border border-white/10"
            >
              <img
                id="fish-detail-img"
                src=""
                class="w-full h-full object-contain"
              />
            </div>
            <div>
              <h3
                id="fish-detail-name"
                class="text-xl font-black text-white uppercase italic tracking-tighter"
              >
                ---
              </h3>
              <span
                id="fish-detail-rarity"
                class="text-[10px] font-black px-2 py-0.5 rounded-full uppercase"
                >---</span
              >
            </div>
          </div>
          <button
            id="btn-close-fish-details"
            class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-white"
          >
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>

        <div class="grid grid-cols-2 gap-3 mb-6">
          <div class="bg-white/5 p-3 rounded-xl border border-white/5">
            <p class="text-[9px] text-gray-400 uppercase font-bold mb-1">
              Valor de Venda
            </p>
            <p
              id="fish-detail-price"
              class="text-lg font-black text-yellow-400"
            >
              $0
            </p>
          </div>
          <div class="bg-white/5 p-3 rounded-xl border border-white/5">
            <p class="text-[9px] text-gray-400 uppercase font-bold mb-1">
              Dificuldade
            </p>
            <p
              id="fish-detail-difficulty"
              class="text-lg font-black text-primary"
            >
              ‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ
            </p>
          </div>
          <div class="bg-white/5 p-3 rounded-xl border border-white/5">
            <p class="text-[9px] text-gray-400 uppercase font-bold mb-1">
              Profundidade M√≠n.
            </p>
            <p id="fish-detail-depth" class="text-lg font-black text-blue-400">
              0m
            </p>
          </div>
          <div
            id="fish-detail-count-container"
            class="bg-white/5 p-3 rounded-xl border border-white/5"
          >
            <p class="text-[9px] text-gray-400 uppercase font-bold mb-1">
              Total Pescado
            </p>
            <p id="fish-detail-count" class="text-lg font-black text-white">
              0
            </p>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="reset-confirm-modal">
      <div class="modal-content border-primary/30 bg-surface-darker">
        <h2 class="text-primary uppercase tracking-tighter italic">
          Limpar Registros?
        </h2>
        <p
          class="text-gray-400 text-[11px] font-bold uppercase tracking-widest mt-4"
        >
          Seu progresso atual ser√° removido permanentemente do di√°rio de bordo.
        </p>

        <div class="flex flex-col gap-3 mt-8">
          <button
            id="btn-reset-final"
            class="w-full py-4 bg-primary/10 border border-primary/50 text-primary font-black uppercase text-xs rounded-xl hover:bg-primary hover:text-white transition-all shadow-lg"
          >
            Confirmar Exclus√£o
          </button>
          <button
            class="w-full py-3 text-gray-500 font-bold uppercase text-[10px] hover:text-white transition-colors"
            onclick="document.getElementById('reset-confirm-modal').classList.remove('active')"
          >
            Voltar para o Mar
          </button>
        </div>
      </div>
    </div>

    <div
      id="area-fish-modal"
      class="fixed inset-0 z-[110] flex items-end justify-center pointer-events-none modal-base"
    >
      <div
        class="bg-[#12141d] w-full max-w-md p-6 rounded-t-3xl border-t border-primary/30 transform translate-y-full transition-transform duration-300 ease-out pointer-events-auto"
      >
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3
              class="text-xl font-black text-white uppercase italic leading-none"
            >
              Ecossistema
            </h3>
            <span
              class="text-[10px] text-primary font-bold uppercase tracking-widest"
              >Esp√©cies nesta regi√£o</span
            >
          </div>
          <button
            id="btn-close-area-fish"
            class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-white active:scale-90 transition-transform"
          >
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>

        <div
          id="area-fish-list"
          class="grid grid-cols-4 gap-3 max-h-[50vh] overflow-y-auto pb-6 pr-1"
        ></div>
      </div>
    </div>

    <div
      id="event-details-modal"
      class="fixed inset-0 z-[110] flex items-end justify-center pointer-events-none modal-base"
    >
      <div
        class="bg-[#12141d] w-full max-w-md p-6 rounded-t-3xl border-t border-primary/30 transform translate-y-full transition-transform duration-300 ease-out pointer-events-auto"
      >
        <div class="flex items-center justify-between mb-6">
          <div>
            <h3
              id="event-detail-type-title"
              class="text-xl font-black text-white uppercase italic leading-none"
            >
              Mar√© Favor√°vel
            </h3>
            <span
              class="text-[10px] text-gray-400 font-bold uppercase tracking-widest"
              >Fen√¥meno Ativo</span
            >
          </div>
          <button
            id="btn-close-event-details"
            class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center text-white"
          >
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>

        <div
          class="flex items-center gap-5 mb-8 bg-white/5 p-4 rounded-2xl border border-white/5"
        >
          <div id="event-detail-icon" class="text-5xl animate-bounce-slow">
            üåü
          </div>
          <div>
            <h4
              id="event-detail-name"
              class="text-lg font-black text-primary uppercase"
            >
              ---
            </h4>
            <p
              id="event-detail-desc"
              class="text-xs text-gray-400 leading-relaxed italic"
            >
              ---
            </p>
          </div>
        </div>

        <div
          class="bg-primary/10 border border-primary/20 rounded-xl p-4 flex items-center justify-between"
        >
          <div class="flex flex-col">
            <span class="text-[9px] font-black text-primary uppercase"
              >Expira em</span
            >
            <span
              id="event-detail-timer"
              class="text-xl font-mono font-bold text-white"
              >00:00</span
            >
          </div>
          <span
            class="material-symbols-outlined text-primary text-3xl opacity-30"
            >history_toggle_off</span
          >
        </div>
      </div>
    </div>

    <div id="flash-overlay" class="flash-screen"></div>
    <script src="script.js"></script>
  </body>
</html>
